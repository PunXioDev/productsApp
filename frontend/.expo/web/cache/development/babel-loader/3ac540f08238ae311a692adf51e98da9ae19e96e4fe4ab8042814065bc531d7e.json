{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useForm } from \"react-hook-form\";\nimport { Products } from \"../../models/products\";\nimport { URL } from \"../../environments/env\";\nimport { styles } from \"../../style/style\";\nimport { Users } from \"../../models/users\";\nimport { useState } from \"react\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar USER_INFO = \"@userInfo\";\nexport default function SignIn(_x) {\n  return _SignIn.apply(this, arguments);\n}\nfunction _SignIn() {\n  _SignIn = _asyncToGenerator(function* (_ref) {\n    var navigation = _ref.navigation;\n    var users = [];\n    var user = new Users();\n    console.log(user);\n    var product = new Products();\n    var _useState = useState(new Users()),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n    var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMess = _useState4[0],\n      setErrorMess = _useState4[1];\n    var _useForm = useForm({\n        defaultValues: new Users()\n      }),\n      handleSubmit = _useForm.handleSubmit,\n      reset = _useForm.reset;\n    var getByEmail = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        if (formData.email !== \"\" && formData.password !== \"\") {\n          yield axios.get(URL + \"/users/getByEmail/\" + formData.email).then(function () {\n            var _ref3 = _asyncToGenerator(function* (response) {\n              user = response.data;\n              if (user.password === formData.password) {\n                yield AsyncStorage.setItem(USER_INFO, user);\n                setErrorMess(\"Iniciando sesion...\");\n                setTimeout(function () {\n                  navigation.navigate(\"Products\", {\n                    user: user,\n                    product: product\n                  });\n                  setErrorMess(\"\");\n                }, 1500);\n              } else {\n                setErrorMess(\"El usuario no esta registrado\");\n                setTimeout(function () {\n                  navigation.navigate(\"Signup\");\n                  setErrorMess(\"\");\n                }, 1500);\n              }\n            });\n            return function (_x2) {\n              return _ref3.apply(this, arguments);\n            };\n          }()).catch(function (e) {\n            setErrorMess(e);\n            console.log(e);\n            setTimeout(function () {\n              setErrorMess(\"\");\n            }, 1500);\n          });\n        } else {\n          setErrorMess(\"Todos los campos son obligatorios.\");\n          setTimeout(function () {\n            setErrorMess(\"\");\n          }, 2000);\n        }\n        reset();\n      });\n      return function getByEmail() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var onChange = function onChange(e, type) {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, type, e)));\n    };\n    return _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        style: styles.title,\n        children: \"Sign In\"\n      }), _jsx(Text, {\n        style: styles.subtitle,\n        children: \"Login to the application\"\n      }), _jsx(TextInput, {\n        style: styles.textInput,\n        placeholder: \"Email\",\n        onChangeText: function onChangeText(e) {\n          return onChange(e, \"email\");\n        },\n        defaultValue: formData.email\n      }), _jsx(TextInput, {\n        style: styles.textInput,\n        placeholder: \"Password\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(e) {\n          return onChange(e, \"password\");\n        },\n        defaultValue: formData.password\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: handleSubmit(getByEmail),\n        children: _jsx(Text, {\n          children: \"Sign In\"\n        })\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          navigation.navigate(\"Signup\", {\n            user: user\n          });\n        },\n        children: _jsx(Text, {\n          style: styles.text,\n          children: \"Don't have an account?\"\n        })\n      }), _jsx(Text, {\n        style: {\n          fontWeight: \"bold\",\n          marginTop: 10,\n          color: \"black\"\n        },\n        children: errorMess\n      })]\n    });\n  });\n  return _SignIn.apply(this, arguments);\n}","map":{"version":3,"names":["AsyncStorage","useForm","Products","URL","styles","Users","useState","React","axios","jsx","_jsx","jsxs","_jsxs","USER_INFO","SignIn","_x","_SignIn","apply","arguments","_asyncToGenerator","_ref","navigation","users","user","console","log","product","_useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","errorMess","setErrorMess","_useForm","defaultValues","handleSubmit","reset","getByEmail","_ref2","email","password","get","then","_ref3","response","data","setItem","setTimeout","navigate","_x2","catch","e","onChange","type","_objectSpread","_defineProperty","View","style","container","children","Text","title","subtitle","TextInput","textInput","placeholder","onChangeText","defaultValue","secureTextEntry","TouchableOpacity","button","onPress","text","fontWeight","marginTop","color"],"sources":["D:/Archivos de programa/Projects/productsApp/frontend/src/components/UsersPages/Singin.js"],"sourcesContent":["import { Text, View, TextInput, TouchableOpacity } from \"react-native\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Products } from \"../../models/products\";\r\nimport { URL } from \"../../environments/env\";\r\nimport { styles } from \"../../style/style\";\r\nimport { Users } from \"../../models/users\";\r\nimport { useState } from \"react\";\r\nimport React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst USER_INFO = \"@userInfo\";\r\n\r\nexport default async function SignIn({ navigation }) {\r\n  //#region atributos\r\n  let users = [];\r\n  let user = new Users();\r\n  // user = await AsyncStorage.getItem(USER_INFO);\r\n  console.log(user);\r\n  let product = new Products();\r\n\r\n  const [formData, setFormData] = useState(new Users());\r\n  const [errorMess, setErrorMess] = useState(\"\");\r\n\r\n  const { handleSubmit, reset } = useForm({\r\n    defaultValues: new Users(),\r\n  });\r\n\r\n  //#endregion\r\n\r\n  //#region functions\r\n\r\n  //#region services\r\n  //get one by email for login\r\n  const getByEmail = async () => {\r\n    if (formData.email !== \"\" && formData.password !== \"\") {\r\n      await axios\r\n        .get(`${URL}/users/getByEmail/${formData.email}`)\r\n        .then(async (response) => {\r\n          user = response.data;\r\n          if (user.password === formData.password) {\r\n            await AsyncStorage.setItem(USER_INFO, user);\r\n            setErrorMess(\"Iniciando sesion...\");\r\n            setTimeout(() => {\r\n              navigation.navigate(\"Products\", {\r\n                user: user,\r\n                product: product,\r\n              });\r\n              setErrorMess(\"\");\r\n            }, 1500);\r\n          } else {\r\n            setErrorMess(\"El usuario no esta registrado\");\r\n            setTimeout(() => {\r\n              navigation.navigate(\"Signup\");\r\n              setErrorMess(\"\");\r\n            }, 1500);\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          setErrorMess(e);\r\n          console.log(e);\r\n          setTimeout(() => {\r\n            setErrorMess(\"\");\r\n          }, 1500);\r\n        });\r\n    } else {\r\n      setErrorMess(\"Todos los campos son obligatorios.\");\r\n      setTimeout(() => {\r\n        setErrorMess(\"\");\r\n      }, 2000);\r\n    }\r\n    reset();\r\n  };\r\n  //#endregion\r\n\r\n  //#region events\r\n  const onChange = (e, type) => {\r\n    setFormData({ ...formData, [type]: e });\r\n  };\r\n  //#endregion\r\n\r\n  //#endregion\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Sign In</Text>\r\n      <Text style={styles.subtitle}>Login to the application</Text>\r\n      <TextInput\r\n        style={styles.textInput}\r\n        placeholder=\"Email\"\r\n        onChangeText={(e) => onChange(e, \"email\")}\r\n        defaultValue={formData.email}\r\n      />\r\n      <TextInput\r\n        style={styles.textInput}\r\n        placeholder=\"Password\"\r\n        secureTextEntry={true}\r\n        onChangeText={(e) => onChange(e, \"password\")}\r\n        defaultValue={formData.password}\r\n      />\r\n      <TouchableOpacity\r\n        style={styles.button}\r\n        onPress={handleSubmit(getByEmail)}\r\n      >\r\n        <Text>Sign In</Text>\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          navigation.navigate(\"Signup\", { user: user });\r\n        }}\r\n      >\r\n        <Text style={styles.text}>Don't have an account?</Text>\r\n      </TouchableOpacity>\r\n      <Text style={{ fontWeight: \"bold\", marginTop: 10, color: \"black\" }}>\r\n        {errorMess}\r\n      </Text>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}